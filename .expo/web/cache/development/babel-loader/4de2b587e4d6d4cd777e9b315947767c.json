{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { createDrawerNavigator } from '@react-navigation/drawer';\nimport MainLogin from \"../Screens/login/login\";\nimport SignUpPublic from \"../Screens/public-sign-up/sign\";\nimport MainHome from \"../Screens/home/home\";\nimport { auth, onAuthStateChanged, doc, getDoc, db } from \"../configs/firebase\";\nimport { GlobalContext } from \"../context/context\";\nvar Stack = createNativeStackNavigator();\nvar Drawer = createDrawerNavigator();\n\nfunction App() {\n  var _React$useContext = React.useContext(GlobalContext),\n      state = _React$useContext.state,\n      dispatch = _React$useContext.dispatch;\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      userData = _React$useState2[0],\n      setUserData = _React$useState2[1];\n\n  React.useEffect(function () {\n    onAuthStateChanged(auth, function _callee(user) {\n      var userRef, _await$getDoc, data;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!user) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.prev = 1;\n              userRef = doc(db, \"users\", user.uid);\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(getDoc(userRef));\n\n            case 5:\n              _await$getDoc = _context.sent;\n              data = _await$getDoc.data;\n              console.log(data);\n              dispatch({\n                type: \"ACTIVE_USER\",\n                data: data\n              });\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0, \"error\");\n\n            case 14:\n              setUserData(user);\n              _context.next = 18;\n              break;\n\n            case 17:\n              console.log(\"user not found\");\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[1, 11]], Promise);\n    });\n  }, []);\n  return React.createElement(NavigationContainer, null, React.createElement(Drawer.Navigator, null, userData ? React.createElement(Drawer.Screen, {\n    name: \"home\",\n    component: MainHome\n  }) : React.createElement(React.Fragment, null, React.createElement(Drawer.Screen, {\n    name: \"Login\",\n    component: MainLogin\n  }), React.createElement(Drawer.Screen, {\n    name: \"Sign-up\",\n    component: SignUpPublic\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/hamza/Desktop/AbdulSaboor/ReactNativeDrawer/src/navigation/routes.js"],"names":["React","NavigationContainer","createNativeStackNavigator","createDrawerNavigator","MainLogin","SignUpPublic","MainHome","auth","onAuthStateChanged","doc","getDoc","db","GlobalContext","Stack","Drawer","App","useContext","state","dispatch","useState","userData","setUserData","useEffect","user","userRef","uid","data","console","log","type"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;;AAEA,SAASC,mBAAT,QAAoC,0BAApC;AACA,SAASC,0BAAT,QAA2C,gCAA3C;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,OAAOC,SAAP;AACA,OAAOC,YAAP;AACA,OAAOC,QAAP;AACA,SAASC,IAAT,EAAgBC,kBAAhB,EAAsCC,GAAtC,EAA4CC,MAA5C,EAAqDC,EAArD;AACA,SAASC,aAAT;AAEA,IAAMC,KAAK,GAAGX,0BAA0B,EAAxC;AACA,IAAMY,MAAM,GAAGX,qBAAqB,EAApC;;AAEA,SAASY,GAAT,GAAe;AACb,0BAAwBf,KAAK,CAACgB,UAAN,CAAiBJ,aAAjB,CAAxB;AAAA,MAAKK,KAAL,qBAAKA,KAAL;AAAA,MAAaC,QAAb,qBAAaA,QAAb;;AACA,wBAA+BlB,KAAK,CAACmB,QAAN,EAA/B;AAAA;AAAA,MAAKC,QAAL;AAAA,MAAgBC,WAAhB;;AACArB,EAAAA,KAAK,CAACsB,SAAN,CAAgB,YAAI;AAClBd,IAAAA,kBAAkB,CAACD,IAAD,EAAO,iBAAOgB,IAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mBACpBA,IADoB;AAAA;AAAA;AAAA;;AAAA;AAIfC,cAAAA,OAJe,GAILf,GAAG,CAACE,EAAD,EAAI,OAAJ,EAAcY,IAAI,CAACE,GAAnB,CAJE;AAAA;AAAA,+CAKAf,MAAM,CAACc,OAAD,CALN;;AAAA;AAAA;AAKdE,cAAAA,IALc,iBAKdA,IALc;AAMnBC,cAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAR,cAAAA,QAAQ,CAAC;AAACW,gBAAAA,IAAI,EAAG,aAAR;AAAwBH,gBAAAA,IAAI,EAAJA;AAAxB,eAAD,CAAR;AAPmB;AAAA;;AAAA;AAAA;AAAA;AASnBC,cAAAA,OAAO,CAACC,GAAR,cAAmB,OAAnB;;AATmB;AAWrBP,cAAAA,WAAW,CAACE,IAAD,CAAX;AAXqB;AAAA;;AAAA;AAarBI,cAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;;AAbqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP,CAAlB;AAgBD,GAjBD,EAiBE,EAjBF;AAkBA,SACE,oBAAC,mBAAD,QACE,oBAAC,MAAD,CAAQ,SAAR,QAEER,QAAQ,GACN,oBAAC,MAAD,CAAQ,MAAR;AAAe,IAAA,IAAI,EAAC,MAApB;AAA2B,IAAA,SAAS,EAAEd;AAAtC,IADM,GAGN,0CACE,oBAAC,MAAD,CAAQ,MAAR;AAAe,IAAA,IAAI,EAAC,OAApB;AAA4B,IAAA,SAAS,EAAEF;AAAvC,IADF,EAEE,oBAAC,MAAD,CAAQ,MAAR;AAAe,IAAA,IAAI,EAAC,SAApB;AAA8B,IAAA,SAAS,EAAEC;AAAzC,IAFF,CALJ,CADF,CADF;AAiBD;;AAED,eAAeU,GAAf","sourcesContent":["import * as React from 'react';\r\nimport { View, Text } from 'react-native';\r\nimport { NavigationContainer } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport MainLogin from '../Screens/login/login';\r\nimport SignUpPublic from '../Screens/public-sign-up/sign';\r\nimport MainHome from '../Screens/home/home';\r\nimport { auth , onAuthStateChanged  , doc , getDoc , db} from '../configs/firebase';\r\nimport { GlobalContext } from '../context/context';\r\n\r\nconst Stack = createNativeStackNavigator();\r\nconst Drawer = createDrawerNavigator();\r\n\r\nfunction App() {\r\n  let {state , dispatch}= React.useContext(GlobalContext);\r\n  let [userData , setUserData] = React.useState()\r\n  React.useEffect(()=>{\r\n    onAuthStateChanged(auth, async (user)=>{\r\n      if(user){\r\n        // console.log(user, \"user Found\");\r\n        try {\r\n          let userRef = doc(db,\"users\" , user.uid)\r\n          let {data} = await getDoc(userRef)\r\n          console.log(data)\r\n          dispatch({type : \"ACTIVE_USER\" , data})\r\n        } catch (error) {\r\n          console.log(error, \"error\")\r\n        }\r\n        setUserData(user)\r\n      }else{\r\n        console.log(\"user not found\")\r\n      }\r\n    })\r\n  },[])\r\n  return (\r\n    <NavigationContainer>\r\n      <Drawer.Navigator>\r\n      {\r\n        userData ? (\r\n          <Drawer.Screen name=\"home\" component={MainHome} />\r\n        ) : (\r\n          <>\r\n            <Drawer.Screen name=\"Login\" component={MainLogin} />\r\n            <Drawer.Screen name=\"Sign-up\" component={SignUpPublic} />\r\n          </>\r\n        )\r\n      }\r\n      </Drawer.Navigator>\r\n\r\n    </NavigationContainer>\r\n  );\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}